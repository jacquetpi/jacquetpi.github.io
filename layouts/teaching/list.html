{{ define "main" }}
{{ partial "sidebar-blog.html" (dict "midTitle" "Teaching" "midHref" "/teaching/" "Site" .Site) }}
<div class="blog-content">
  <a class="fallback-home" href="/">Back to home</a>
  <h1 class="theme-contrast">Teaching</h1>

  {{ $courses := .Site.Data.teaching.courses }}
  {{ $institutions := slice }}
  {{ range $courses }}
    {{ $institutions = $institutions | append .institution }}
  {{ end }}
  {{ range $institutions | uniq }}
    {{ $inst := . }}
    <h2 class="theme-contrast">{{ $inst }}</h2>
    {{ range where $courses "institution" $inst }}
      {{ partial "teaching-entry.html" (dict "course" . "show_institution" false) }}
    {{ end }}
  {{ end }}

  <hr style="width:0%; margin-top:5em">
</div>
{{ end }}
